const apriMenu=document.getElementById("apriMenu"),menu=document.getElementById("menu");apriMenu&&apriMenu.addEventListener("click",function(e){console.log(menu.classList),console.log(menu.classList.contains("nascosto")),menu.classList.contains("nascosto")?menu.classList.remove("nascosto"):menu.classList.add("nascosto")});const Avviso=document.querySelector(".messaggioAR");Avviso&&setTimeout(function(){Avviso.remove()},5e3);const FormUserLogin=document.getElementById("username"),FormPswLogin=document.getElementById("password"),FormLogin=document.getElementById("loginForm");FormLogin&&(FormUserLogin.addEventListener("blur",function(){checkUsername(FormUserLogin.value)?removeError(FormUserLogin):showErrorForm(FormUserLogin,"L'username pu\xf2 contenere da 4 a 20 caratteri alfabetici")}),FormPswLogin.addEventListener("blur",function(){FormPswLogin.value?removeError(FormPswLogin):showErrorForm(FormPswLogin,"Inserire una password")}),FormLogin.addEventListener("submit",function(e){(!checkUsername(FormUserLogin.value)||!FormPswLogin.value)&&(e.preventDefault(),alert("Inserire correttamente le credenziali."),document.getElementsByClassName("errorForm")[0].previousElementSibling.focus())})),FormNameSup=document.getElementById("name"),FormSNameSup=document.getElementById("surname"),FormUserSup=document.getElementById("username"),FormEmailSup=document.getElementById("email"),FormPswSup=document.getElementById("password"),(FormSup=document.getElementById("signupForm"))&&(FormNameSup.addEventListener("blur",function(){checkName(FormNameSup.value)?removeError(FormNameSup):showErrorForm(FormNameSup,"Sono consentiti solo da 3 a 64 caratteri alfabetici per questo campo.")}),FormSNameSup.addEventListener("blur",function(){checkName(FormSNameSup.value)?removeError(FormSNameSup):showErrorForm(FormSNameSup,"Sono consentiti solo da 3 a 64 caratteri alfabetici per questo campo.")}),FormUserSup.addEventListener("blur",function(){checkUsername(FormUserSup.value)?removeError(FormUserSup):showErrorForm(FormUserSup,"Sono consentiti solo da 4 a 20 caratteri alfabetici per questo campo.")}),FormEmailSup.addEventListener("blur",function(){checkEmail(FormEmailSup.value)?removeError(FormEmailSup):showErrorForm(FormEmailSup,"Formato indirizzo email non valido.")}),FormPswSup.addEventListener("input",function(){checkPassword(FormPswSup.value)?removeError(FormPswSup):showErrorForm(FormPswSup,"Sono consentiti da 4 a 63 caratteri per questo campo. Spazi non consentiti")}),FormSup.addEventListener("submit",function(e){(!checkName(FormNameSup.value)||!checkName(FormSNameSup.value)||!checkUsername(FormUserSup.value)||!checkEmail(FormEmailSup.value)||!checkPassword(FormPswSup.value))&&(e.preventDefault(),alert("Compilare correttamente il form"),document.getElementsByClassName("errorForm")[0].previousElementSibling.focus())}));const BtnCreaScheda=document.getElementById("creaLink"),BtnCercaSchede=document.getElementById("schedeLink"),SecCreaScheda=document.getElementById("creaSchedaWin"),SecCercaSchede=document.getElementById("searchSchedeWin"),formCercaSchede=document.getElementById("searchForm"),SecEliminaUtenti=document.getElementById("gestioneUtentiWin"),BtnEliminaUtenti=document.getElementById("utentiLink");if(SecCreaScheda&&SecCercaSchede&&SecEliminaUtenti){window.onload=()=>{if(window.location.href.includes("admin")&&localStorage.getItem("admin")){var e=localStorage.getItem("admin");document.querySelector(`#${e}`).click()}else showAdminSection(SecCreaScheda,BtnCreaScheda)},BtnCreaScheda.addEventListener("click",function(){showAdminSection(SecCreaScheda,BtnCreaScheda)}),BtnCercaSchede.addEventListener("click",function(){showAdminSection(SecCercaSchede,BtnCercaSchede)}),BtnEliminaUtenti.addEventListener("click",function(){showAdminSection(SecEliminaUtenti,BtnEliminaUtenti)}),formCercaSchede.addEventListener("submit",function(){showAdminSection(SecCercaSchede,BtnCercaSchede)});let e=document.getElementById("Atleta"),t=document.getElementById("dataDiInizio"),r=document.getElementById("dataDiFine"),i=document.getElementById("creaSchedaForm");e.addEventListener("input",function(){checkSelect(e)?removeError(e):showErrorForm(e,"Selezionare un atleta")}),t.addEventListener("input",function(){checkData(t)?removeError(t):showErrorForm(t,'La data deve essere nel formato "dd-mm-aaaa"')}),r.addEventListener("input",function(){checkData(r)?checkPeriodo(t,r)?removeError(r):showErrorForm(r,"La data di fine periodo deve essere la stessa o successiva a quella di inizio"):showErrorForm(r,'La data deve essere nel formato "dd-mm-aaaa"')});let o=document.querySelectorAll("fieldset.fieldsetEsercizio");var n=o[0].getElementsByClassName("nomeEsercizio")[0];o.forEach(function(e){var t=e.getElementsByClassName("nomeEsercizio")[0],r=e.getElementsByClassName("ripetizioniEsercizio")[0],i=e.getElementsByClassName("recuperoEsercizio")[0],o=e.getElementsByClassName("noteEsercizio")[0],n=e.getElementsByClassName("errorForm");r.disabled=!0,i.disabled=!0,o.disabled=!0,t.addEventListener("change",function(){checkSelect(t)?(r.disabled=!1,i.disabled=!1,o.disabled=!1):(r.value="",r.disabled=!0,i.value="",i.disabled=!0,o.value="",o.disabled=!0,Array.from(n).forEach(e=>e.remove()))}),r.addEventListener("blur",function(){removeError(r),!1!=r.disabled||checkRipetizioni(r.value)||showErrorForm(r,"Per questo campo sono consentiti da 3 a 50 caratteri alfanumerici e simboli - () . ; , * \xd7")}),i.addEventListener("blur",function(){removeError(i),!1!=i.disabled||checkRecupero(i.value)||showErrorForm(i,"Per questo campo sono consentiti da 3 a 50 caratteri alfanumerici e simboli - () . ; , * \xd7")}),o.addEventListener("input",function(){removeError(o),!1!=o.disable||checkRecupero(o.value)||showErrorForm(o,"Per questo campo sono consentiti al massimo 500 caratteri")})}),i.addEventListener("submit",function(i){var o=document.getElementsByClassName("errorForm"),a=Array.from(document.getElementsByClassName("nomeEsercizio")).filter(e=>""!=e.value),c=Array.from(document.getElementsByClassName("ripetizioniEsercizio")).filter(e=>!e.disabled),s=Array.from(document.getElementsByClassName("recuperoEsercizio")).filter(e=>!e.disabled),d=Array.from(document.getElementsByClassName("noteEsercizio")).filter(e=>!e.disabled);checkSelect(e)&&checkData(t)&&checkData(r)&&checkPeriodo(t,r)?c.every(e=>checkRipetizioni(e.value))&&s.every(e=>checkRecupero(e.value))&&d.every(e=>checkNoteScheda(e.value))?0==a.length&&(i.preventDefault(),alert("Inserire almeno un esercizio."),n.focus()):(i.preventDefault(),alert("Ricontrollare i campi form"),o[0]?o[0].previousElementSibling.focus():n.focus()):(i.preventDefault(),alert("Compilare correttamente l'intestazione"),o[0]?o[0].previousElementSibling.focus():e.focus())})}const BtnSchedaAdmin=document.getElementById("visualizzaBtn"),SecSchedaAdmin=document.getElementById("schedaWin"),BtnModPerAdmin=document.getElementById("modificaPerBtn"),SecModPerAdmin=document.getElementById("modificaPeriodoWin"),BtnModEsAdmin=document.getElementById("modificaEsBtn"),SecModEsAdmin=document.getElementById("modificaEserciziWin"),BtnAggEsAdmin=document.getElementById("aggiungiEsBtn"),SecAggEsAdmin=document.getElementById("aggiungiEserciziWin"),BtnRimEsAdmin=document.getElementById("rimuoviEsBtn"),SecRimEsAdmin=document.getElementById("rimuoviEserciziWin"),BtnElScheda=document.getElementById("eliminaSchedaBtn"),SecElScheda=document.getElementById("eliminaSchedaWin");var erroriForm=document.getElementsByClassName("errorForm");if(SecSchedaAdmin&&SecModPerAdmin&&SecModEsAdmin&&SecAggEsAdmin&&SecRimEsAdmin&&SecElScheda){showSchedaSection(SecSchedaAdmin,BtnSchedaAdmin),BtnSchedaAdmin.addEventListener("click",function(){showSchedaSection(SecSchedaAdmin,BtnSchedaAdmin)}),BtnModPerAdmin.addEventListener("click",function(){showSchedaSection(SecModPerAdmin,BtnModPerAdmin)}),BtnModEsAdmin.addEventListener("click",function(){showSchedaSection(SecModEsAdmin,BtnModEsAdmin)}),BtnAggEsAdmin.addEventListener("click",function(){showSchedaSection(SecAggEsAdmin,BtnAggEsAdmin)}),BtnRimEsAdmin.addEventListener("click",function(){showSchedaSection(SecRimEsAdmin,BtnRimEsAdmin)}),BtnElScheda.addEventListener("click",function(){showSchedaSection(SecElScheda,BtnElScheda)});let a=document.getElementById("formPeriodo"),c=document.getElementById("inizioS"),s=document.getElementById("fineS");c.addEventListener("change",function(){checkData(c)?checkPeriodo(c,s)?(removeError(c),removeError(s)):showErrorForm(s,"La data di fine periodo deve essere la stessa o successiva a quella di inizio"):showErrorForm(c,'La data deve essere nel formato "dd-mm-aaaa"')}),s.addEventListener("input",function(){checkData(s)?checkPeriodo(c,s)?removeError(s):showErrorForm(s,"La data di fine periodo deve essere la stessa o successiva a quella di inizio"):showErrorForm(s,'La data deve essere nel formato "dd-mm-aaaa"')}),a.addEventListener("submit",function(e){checkData(c)&&checkData(s)&&checkPeriodo(c,s)||(e.preventDefault(),alert("Compilare correttamente i campi"),erroriForm[0].previousElementSibling.focus())});let d=document.getElementById("formModificaEsercizi"),m=document.querySelectorAll(".esercizioForm"),l=document.querySelectorAll("textarea.ripetizioneForm"),u=document.querySelectorAll("textarea.recuperoForm"),E=document.querySelectorAll("textarea.notaForm");m.forEach(e=>{e.addEventListener("input",function(){checkSelect(e.value)?removeError(e):showErrorForm(e,"Selezionare un esercizio")})}),l.forEach(e=>{e.addEventListener("blur",function(){checkRipetizioni(e.value)?removeError(e):showErrorForm(e,"Per questo campo sono consentiti da 3 a 40 caratteri alfanumerici e simboli - () . ; , * \xd7")})}),u.forEach(e=>{e.addEventListener("blur",function(){checkRipetizioni(e.value)?removeError(e):showErrorForm(e,"Per questo campo sono consentiti da 3 a 40 caratteri alfanumerici e simboli - () . ; , * \xd7")})}),E.forEach(e=>{e.addEventListener("blur",function(){checkNoteScheda(e.value)?removeError(e):showErrorForm(e,"Per questo campo sono consentiti al massimo 500 caratteri")})}),d.addEventListener("submit",function(e){Array.from(m).every(e=>checkSelect(e.value))&&Array.from(l).every(e=>checkRipetizioni(e.value))&&Array.from(u).every(e=>checkRecupero(e.value))&&Array.from(E).every(e=>checkNoteScheda(e.value))||(e.preventDefault(),alert("Ricontrolla tutti i campi del form"),erroriForm[0]?erroriForm[0].previousElementSibling.focus():m[0].focus())});let v=document.getElementById("formAggiungiEsercizio"),h=document.getElementById("new_esercizio"),S=document.getElementById("new_ripetizioni"),f=document.getElementById("new_recupero"),g=document.getElementById("new_note");h.addEventListener("blur",function(){checkSelect(h)?removeError(h):showErrorForm(h,"Selezionare un esercizio")}),S.addEventListener("blur",function(){checkRipetizioni(S.value)?removeError(S):showErrorForm(S,"Per questo campo sono consentiti da 3 a 40 caratteri alfanumerici e simboli - () . ; , * \xd7")}),f.addEventListener("blur",function(){checkRecupero(f.value)?removeError(f):showErrorForm(f,"Per questo campo sono consentiti da 3 a 40 caratteri alfanumerici e simboli - () . ; , * \xd7")}),g.addEventListener("blur",function(){checkNoteScheda(g.value)?removeError(g):showErrorForm(g,"Per questo campo sono consentiti al massimo 500 caratteri")}),v.addEventListener("submit",function(e){checkSelect(h)&&checkRipetizioni(S.value)&&checkRecupero(f.value)&&checkNoteScheda(g.value)||(e.preventDefault(),alert("Controlla tutti i campi"),erroriForm[0]?erroriForm[0].previousElementSibling.focus():h.focus())});let B=document.getElementById("rimuoviEsercizioForm"),L=document.getElementById("del_esercizio");B.addEventListener("submit",function(e){checkSelect(L)||(e.preventDefault(),alert("Seleziona un esercizio"),L.focus())})}const SecListaSchedeUser=document.getElementById("schedeWin"),SecDatiUser=document.getElementById("datiWin"),BtnListaSchedeUser=document.getElementById("schedeLink"),BtnDatiUser=document.getElementById("datiLink"),FormOldEmail=document.getElementById("oldEmail"),FormNewEmail=document.getElementById("newEmail"),FormCambioEmail=document.getElementById("formModificaEmail");SecListaSchedeUser&&SecDatiUser&&(window.onload=()=>{if(window.location.href.includes("user")&&localStorage.getItem("user")){var e=localStorage.getItem("user");document.querySelector(`#${e}`).click()}else showUserSection(SecListaSchedeUser,BtnListaSchedeUser)},BtnDatiUser.addEventListener("click",function(){showUserSection(SecDatiUser,BtnDatiUser)}),BtnListaSchedeUser.addEventListener("click",function(){showUserSection(SecListaSchedeUser,BtnListaSchedeUser)}),FormNewEmail.addEventListener("input",function(){FormNewEmail.value==FormOldEmail.value?showErrorForm(FormNewEmail,"Il nuovo indirizzo email deve essere diverso dal precedente."):checkEmail(FormNewEmail.value)?removeError(FormNewEmail):showErrorForm(FormNewEmail,"Il nuovo indirizzo email non \xe8 in un formato valido.")}),FormCambioEmail.addEventListener("submit",function(e){FormNewEmail.value!=FormOldEmail.value&&checkEmail(FormNewEmail.value)||(e.preventDefault(),FormNewEmail.focus())}));const BtnSchedaUser=document.getElementById("schedaBtn"),BtnModificaSUser=document.getElementById("modificaBtn"),SecSchedaUser=document.getElementById("schedaWin"),SecModificaSUser=document.getElementById("modificaWin"),FormModificaSUser=document.getElementById("editForm"),NoteFormSUser=document.querySelectorAll("textarea");function removeError(e){var t=document.getElementById(e.id+"-Error");e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),t&&t.remove()}function showErrorForm(e,t){removeError(e);var r=document.createElement("span");r.id=e.id+"-Error",r.className="errorForm",r.textContent=t,e.setAttribute("aria-describedby",r.id),e.setAttribute("aria-invalid","true"),e.parentNode.insertBefore(r,e.nextSibling)}function checkSelect(e){return""!=e.value}function checkUsername(e){return/^[a-zA-Z]{4,20}$/.test(e)}function checkName(e){return/^[a-zA-Z]{3,63}$/.test(e)}function checkPassword(e){return/^[^\s]{4,63}$/.test(e)}function checkEmail(e){return/^([\w\-\+\.]+){2,}\@([\w\-\+\.]+){2,}\.([\w\-\+\.]+){2,4}$/.test(e)}function checkData(e){return(regExp=/^\d{4}-\d{2}-\d{2}$/).test(e.value)}function checkPeriodo(e,t){var r=new Date(e.value),i=new Date(t.value);return r<=i}function checkRipetizioni(e){return/^[-().;,a-zA-Z*×/\d\s]{3,40}$/.test(e)}function checkRecupero(e){return/^[-().;,a-zA-Z*×/\d\s]{3,40}$/.test(e)}function checkNoteScheda(e){return/^[\w\d\s\S]{0,500}$/.test(e)}function showUserSection(e,t){Array.from(document.getElementsByTagName("section")).forEach(e=>{e.classList.remove("active")}),Array.from(document.getElementsByTagName("button")).forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),t.classList.add("active"),console.log("Stai visualizzando la sezione con id: "+e.id),localStorage.setItem("user",t.id)}function showAdminSection(e,t){Array.from(document.getElementsByTagName("section")).forEach(e=>{e.classList.remove("active")}),Array.from(document.getElementsByTagName("button")).forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),t.classList.add("active"),console.log("Stai visualizzando la sezione con id: "+e.id),localStorage.setItem("admin",t.id)}function showSchedaSection(e,t){Array.from(document.getElementsByTagName("section")).forEach(e=>{e.classList.remove("active")}),Array.from(document.getElementsByTagName("button")).forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),t.classList.add("active"),console.log("Stai visualizzando la sezione della scheda con id: "+e.id)}SecSchedaUser&&SecModificaSUser&&(showSchedaSection(SecSchedaUser,BtnSchedaUser),BtnModificaSUser.addEventListener("click",function(){showSchedaSection(SecModificaSUser,BtnModificaSUser)}),BtnSchedaUser.addEventListener("click",function(){showSchedaSection(SecSchedaUser,BtnSchedaUser)}),NoteFormSUser.forEach(e=>{e.addEventListener("input",function(){checkNoteScheda(e.value)?removeError(e):showErrorForm(e,"Lunghezza massima consentita: 500 caratteri")})}),FormModificaSUser.addEventListener("submit",function(e){!Array.from(NoteFormSUser).every(e=>checkNoteScheda(e.value))&&(e.preventDefault(),alert("Alcuni campi note non sono compilati correttamente"),document.getElementsByClassName("errorForm")[0].previousElementSibling.focus())}));